@using Shared.Enums.ProjectNeedTypes
<EditForm Model="@Model" OnValidSubmit="Submit">
    <MudCard>
        <MudCardContent>

            <FluentValidationValidator @ref="_fluentValidationValidator" />

            <MudGrid >
                <MudItem xs="12" sm="12" >
                    <TextField @bind-Value="@Model.Name"
                               Label="Name"
                               Lines="2"
                               ValidateAsync="ValidateAsync"
                               For="()=>Model.Name">
                    </TextField>
                    <ValidationMessage For="() => Model.BudgetItems" style="color:red; font-size:x-small;" />
                </MudItem>
            </MudGrid>
            <MudGrid>
                <MudItem xs="12" sm="4">
                    <Select @bind-Value="Model.Focus"
                            TValue="FocusEnum"
                            Label="Focus"
                            Items="FocusEnum.List"
                            For="()=>Model.Focus"
                            ValidateAsync="ValidateAsync"
                            Clearable="false">
                    </Select>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <Select @bind-Value="Model.CostCenter"
                            TValue="CostCenterEnum"
                            Label="Cost Center"
                            Items="CostCenterEnum.List"
                            For="()=>Model.CostCenter"
                            ValidateAsync="ValidateAsync"
                            Clearable="false">
                    </Select>
                </MudItem>
                <MudItem xs="12" sm="4">

                    <Select @bind-Value="Model.ProjectNeedType"
                            Items="ProjectNeedTypeEnum.List"
                            TValue="ProjectNeedTypeEnum"
                            Label="Project Need"
                            For="()=>Model.ProjectNeedType"
                            ValidateAsync="ValidateAsync"
                            Clearable="false">
                    </Select>
                </MudItem>
            </MudGrid>
            <MudGrid>
                
                <MudItem xs="12" sm="4">
                    <DatePicker Label="Initial Project Date"
                                @bind-Value="Model.InitialProjectDate"
                                ValidateAsync=ValidateAsync
                                For="()=>Model.InitialProjectDate">

                    </DatePicker>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <DoubleNumericField Label="%Engineering"
                                        ValidateAsync="ValidateAsync"
                                        @bind-Value="Model.PercentageEngineering"
                                        For="()=>Model.PercentageEngineering" />


                </MudItem>
                <MudItem xs="12" sm="4">
                    <DoubleNumericField Label="%Contingency"
                                        ValidateAsync="ValidateAsync"
                                        @bind-Value="Model.PercentageContingency"
                                        For="()=>Model.PercentageContingency" />

                </MudItem>
            </MudGrid>
         
            <MudGrid>
                <MudItem xs="12" sm="4">
                    <TextField @bind-Value="@Model.ProjectNumber"
                               Label="Project Number"
                               ValidateAsync="ValidateAsync"
                               For="()=>Model.ProjectNumber">
                    </TextField>

                </MudItem>

                <MudItem xs="12" sm="4">
                    <Switch @bind-Value="@Model.IsProductiveAsset" Label="Is Productive Asset?" ValidateAsync="ValidateAsync" />
                </MudItem>
                <MudItem xs="12" sm="4">
                    @if (!Model.IsProductiveAsset)
                    {
                        <DoubleNumericField Label="%VAT"
                                            ValidateAsync="ValidateAsync"
                                            @bind-Value="Model.PercentageTaxProductive"
                                            For="()=>Model.PercentageTaxProductive" />



                    }

                </MudItem>

            </MudGrid>
            <MudGrid>
                <MudItem xs="12" sm="4">
                    <Field Label="Items, USD">@Model.CapitalUSD.ToCurrencyCulture()</Field>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <Field Label="@($"%Engineering, {Model.PercentageEngineering}, USD")">@Model.CapitalEngineeringUSD.ToCurrencyCulture()</Field>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <Field Label="@($"%Contingency, {Model.PercentageContingency}, USD")">@Model.CapitalContingencyUSD.ToCurrencyCulture()</Field>
                </MudItem>

            </MudGrid>
            <MudGrid>
                <MudItem xs="12" sm="4">
                    <Field Label="Expenses, USD">@Model.ExpensesUSD.ToCurrencyCulture()</Field>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <Field Label="Capital, USD">@Model.TotalCapitalUSD.ToCurrencyCulture()</Field>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <Field Label="Appropiation, USD">@Model.AppropiationUSD.ToCurrencyCulture()</Field>
                </MudItem>
            </MudGrid>
   

        </MudCardContent>
        <MudCardActions>

            <MudIconButton Icon="@Icons.Material.Filled.Cancel" OnClick="Cancel" Color="Color.Transparent" Variant="Variant.Outlined"></MudIconButton>
            <MudIconButton Icon="@Icons.Material.Filled.Save" Disabled=!Validated ButtonType="ButtonType.Submit" Variant="Variant.Outlined"></MudIconButton>

        </MudCardActions>
    </MudCard>
</EditForm>
@code {

}
