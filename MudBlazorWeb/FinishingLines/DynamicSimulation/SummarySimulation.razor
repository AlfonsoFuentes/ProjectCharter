@using Shared.FinshingLines



<MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-1">
    @*  <MudTabPanel Text="Batch Schedule">
        @if (Engine != null)
        {
            <ScheduledBatchView Table="@Engine.Scheduler.ScheduledBatchTable" /> 
        }

    </MudTabPanel> *@
    <MudTabPanel Text="Simulation">
        @if (Engine != null && StatusService != null)
        {
            <SimulationMonitor Engine="@Engine" StatusService="@StatusService" />
        }
    </MudTabPanel>
</MudTabs>

@code {
    [Parameter]
    public ReadSimulationFromDatabase SimulationData { get; set; } = null!;
    NewSimulationServices StatusService = null!;
    NewSimulationEngine Engine = null!;
    protected override void OnInitialized()
    {
        if(SimulationData == null)
        {
            SimulationData = new ReadSimulationFromDatabase();
            SimulationData.ReadDatabase();
        }
       

        Engine = new NewSimulationEngine(SimulationData);
        Engine.Init();
        StatusService = new NewSimulationServices(Engine);
        StateHasChanged();
    }

}
